---
---

<section class="text-center py-12 bg-sky-300">
    
    <h2 class="text-3xl font-bold mb-8 text-gray-800">Contact us</h2>

    <!-- Alerta de éxito -->
    <div id="success-alert" class="hidden flex items-center p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400" role="alert">
        <svg class="flex-shrink-0 inline w-4 h-4 mr-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
        </svg>
        <div>
            <span class="font-medium">Success alert!</span> Mail enviado correctamente, nos pondremos en contacto contigo.
        </div>
    </div>

    <!-- Alerta de error -->
    <div id="error-alert" class="hidden flex items-center p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert">
        <svg class="flex-shrink-0 inline w-4 h-4 mr-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
        </svg>
        <div>
            <span class="font-medium">Error alert!</span> Temporary error, please try again later.
        </div>
    </div>

    <form id="form" class="w-full h-full mx-auto bg-sky-300  rounded-lg p-8">
        <div class="mb-6">
            <label for="from_name" class="block text-gray-700 font-bold mb-2">Your Name</label>
            <input type="text" name="from_name" id="from_name" placeholder="Enter your name" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" >
            <small id="from_name_error" class="text-red-500 hidden">Please enter your name.</small>
        </div>

        <div class="mb-6">
            <label for="email_id" class="block text-gray-700 font-bold mb-2">Your Email</label>
            <input type="email" name="email_id" id="email_id" placeholder="Enter your email" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" >
            <small id="email_id_error" class="text-red-500 hidden">Please enter a valid email address.</small>
        </div>
       
        <div class="mb-6">
            <label for="message" class="block text-gray-700 font-bold mb-2">Message</label>
            <textarea name="message" id="message" rows="4" placeholder="Write your message" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" ></textarea>
            <small id="message_error" class="text-red-500 hidden">Please write a message.</small>
        </div>
        <button type="submit" id="button" class="w-full bg-blue-500 text-white font-bold py-3 rounded-lg hover:bg-blue-600 transition-colors">Send Email</button>
    </form>
</section>




<script>
    declare const emailjs: any;

const btn = document.getElementById('button') as HTMLButtonElement | null;
const form = document.getElementById('form') as HTMLFormElement | null;
const successAlert = document.getElementById('success-alert') as HTMLDivElement | null;
const errorAlert = document.getElementById('error-alert') as HTMLDivElement | null;

if (form && btn && successAlert && errorAlert) {
    form.addEventListener('submit', function(event: Event) {
        event.preventDefault();

    // Validación personalizada

    // Inicializar estado de error
    let hasError = false;

    // Validación del nombre
    const name = form.querySelector('[name="from_name"]') as HTMLInputElement | null;
    if (name && !name.value.trim()) {
            document.getElementById('from_name_error')?.classList.remove('hidden');
            hasError = true;
        } else {
            document.getElementById('from_name_error')?.classList.add('hidden');
        }

    // Validación del correo electrónico
    const email = form.querySelector('[name="email_id"]') as HTMLInputElement | null;

    if (email && (!email.value.trim() || !validateEmail(email.value.trim()))) {
            document.getElementById('email_id_error')?.classList.remove('hidden');
            hasError = true;
        } else {
            document.getElementById('email_id_error')?.classList.add('hidden');
        }

    // Validación del mensaje
    const message = form.querySelector('[name="message"]') as HTMLTextAreaElement | null;

    if (message && !message.value.trim()) {
            document.getElementById('message_error')?.classList.remove('hidden');
            hasError = true;
        } else {
            document.getElementById('message_error')?.classList.add('hidden');
        }

    // Si hay errores, detener el envío
    if (hasError) {
            return;
        }
    

    // Si no hay errores, enviar el formulario
    btn.textContent = 'Sending...';

    const serviceID = 'default_service';
    const templateID = 'template_hkkyd9d';

    emailjs.sendForm(serviceID, templateID, this)
        .then(() => {
            btn.textContent = 'Send Email';
            successAlert.classList.remove('hidden'); // Mostrar alerta de éxito
            errorAlert.classList.add('hidden'); // Ocultar alerta de error, si estuviera visible
            form.reset(); // Borrar lo escrito en los inputs
        }, (err: any) => {
            btn.textContent = 'Send Email';
            errorAlert.classList.remove('hidden'); // Mostrar alerta de error
            successAlert.classList.add('hidden'); // Ocultar alerta de éxito, si estuviera visible
        });
});

}

// Función para validar un email
function validateEmail(email: string): boolean {
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return re.test(email);
}

</script>
